# Agentic RAG System Environment Configuration
# Copy this file to .env and update the values for your environment

# =============================================================================
# ENVIRONMENT SETTINGS
# =============================================================================
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=DEBUG

# =============================================================================
# API CONFIGURATION
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_RELOAD=true

# API Security
SECRET_KEY=your-secret-key-change-this-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# CORS Settings
CORS_ORIGINS=["http://localhost:3000", "http://localhost:8080"]
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=["*"]
CORS_ALLOW_HEADERS=["*"]

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=agentic_rag
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_URL=postgresql://postgres:postgres@localhost:5432/agentic_rag

# Database Pool Settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# Development Settings
DB_ECHO=false  # Set to true to log all SQL queries

# =============================================================================
# VECTOR DATABASE CONFIGURATION
# =============================================================================
# ChromaDB
CHROMADB_HOST=localhost
CHROMADB_PORT=8001
CHROMADB_URL=http://localhost:8001

# Collection Settings
CHROMADB_RFQ_COLLECTION=rfq_collection
CHROMADB_OFFER_COLLECTION=offer_collection

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=redis
REDIS_DB=0
REDIS_URL=redis://:redis@localhost:6379/0

# Redis Pool Settings
REDIS_POOL_SIZE=10
REDIS_POOL_TIMEOUT=30

# =============================================================================
# OBJECT STORAGE CONFIGURATION
# =============================================================================
# MinIO (S3-compatible)
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_SECURE=false
MINIO_REGION=us-east-1

# Storage Buckets
MINIO_BUCKET_DOCUMENTS=documents
MINIO_BUCKET_THUMBNAILS=thumbnails
MINIO_BUCKET_EXPORTS=exports

# =============================================================================
# AI/ML SERVICE CONFIGURATION
# =============================================================================
# OpenAI
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_ORGANIZATION=your-openai-org-id-here
OPENAI_EMBEDDING_MODEL=text-embedding-3-large
OPENAI_CHAT_MODEL=gpt-4-turbo-preview
OPENAI_MAX_TOKENS=4096
OPENAI_TEMPERATURE=0.1

# Granite-Docling (will be configured in Sprint 2)
DOCLING_ENDPOINT=http://localhost:9002
DOCLING_MAX_PAGES=2000
DOCLING_TIMEOUT=300

# =============================================================================
# RETRIEVAL CONFIGURATION
# =============================================================================
# Three-hop Search Parameters
K1_RFQ_CANDIDATES=12
K1_RERANK_TOP=3
K3_OFFER_CANDIDATES=40
K3_RERANK_TOP=12
LINK_CONFIDENCE_THRESHOLD=0.6

# Embedding Settings
EMBEDDING_DIMENSION=3072  # text-embedding-3-large
CHUNK_SIZE=1024
CHUNK_OVERLAP=128

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# JWT Settings
JWT_SECRET_KEY=your-jwt-secret-key-change-this
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# Password Hashing
PASSWORD_HASH_ALGORITHM=bcrypt
PASSWORD_HASH_ROUNDS=12

# Rate Limiting
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60  # seconds

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================
# Prometheus
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# OpenTelemetry
OTEL_ENABLED=false
OTEL_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=agentic-rag-api

# Logging
LOG_FORMAT=json
LOG_FILE=logs/agentic-rag.log
LOG_ROTATION=daily
LOG_RETENTION_DAYS=30

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================
# Development Features
ENABLE_DOCS=true
ENABLE_REDOC=true
ENABLE_OPENAPI=true

# Testing
TEST_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/agentic_rag_test

# Development Tools
ENABLE_PROFILER=false
ENABLE_DEBUGGER=false

# =============================================================================
# DOCKER CONFIGURATION
# =============================================================================
# Docker Compose Service Ports
POSTGRES_PORT=5433
CHROMADB_PORT=8001
CHROMADB_GRPC_PORT=50051
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001
REDIS_PORT=6380

# Docker Volume Paths (for bind mounts)
POSTGRES_DATA_PATH=./data/postgres
CHROMADB_DATA_PATH=./data/chromadb
MINIO_DATA_PATH=./data/minio
REDIS_DATA_PATH=./data/redis

# Docker Environment Variables
POSTGRES_AUTH_METHOD=md5
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin

# ChromaDB Authentication (for production)
CHROMA_AUTH_PROVIDER=
CHROMA_AUTH_TOKEN=
CHROMA_AUTH_SERVER_PROVIDER=

# Rate Limiting
ENABLE_RATE_LIMITING=true

# =============================================================================
# PRODUCTION SETTINGS (Override in production)
# =============================================================================
# These should be overridden in production environments

# Security (CHANGE THESE IN PRODUCTION!)
# SECRET_KEY=production-secret-key-very-long-and-random
# JWT_SECRET_KEY=production-jwt-secret-key-very-long-and-random

# Database (Use managed database in production)
# POSTGRES_URL=postgresql://user:password@prod-db-host:5432/agentic_rag

# Redis (Use managed Redis in production)
# REDIS_URL=redis://user:password@prod-redis-host:6379/0

# Object Storage (Use cloud storage in production)
# MINIO_ENDPOINT=s3.amazonaws.com
# MINIO_ACCESS_KEY=your-aws-access-key
# MINIO_SECRET_KEY=your-aws-secret-key
# MINIO_SECURE=true

# Monitoring
# OTEL_ENABLED=true
# OTEL_ENDPOINT=https://your-otel-collector

# Performance
# API_WORKERS=4
# DB_POOL_SIZE=20
# REDIS_POOL_SIZE=20
